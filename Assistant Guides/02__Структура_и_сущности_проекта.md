# 02 — Структура и сущности проекта

Обновлено: 2026-01-14

Этот гайд — справочник для ассистента: какие сущности существуют и где их искать.

## Сущности
- `00__SUMMARY.md` (ROOT) — единая точка входа в дерево.
- `00__SUMMARY.md` (папки) — карта ветки: подпапки и файлы “на уровень вниз”.
- Контентные файлы (`.md`) — канон, сцены, NPC/PC, сессии.
- `Glossary/00__SUMMARY.md` и `Glossary/00__GLOSSARY.md` — глоссарий ассистента: термин/имя → RAW-ссылка на каноничную страницу.

## Корневые ветки репозитория (куда что класть)
- `Сюжет кампании/` — сюжет, арки, сцены и материалы ведущего.
- `Golarion/` — общий лор мира, локации, информация о фракциях.
- `NPC/` — все NPC (МПС) кампании.
- `PC/` — персонажи игроков этой кампании.
- `Sessions/` — заметки по игровым сессиям.
- `Болезни/` — все болезни кампании.
- `Glossary/` — глоссарий ассистента (термины и ссылки).

Каждая папка контента обязана содержать `00__SUMMARY.md`.

## Важные системы проекта

### Timeline система
- **Назначение:** Хронологическая отслеживаемость событий для NPC
- **Файл инструкции:** `Assistant Guides/04__Timeline_система.md`
- **Использование:** Обязательное поле в каждом NPC файле для отслеживания развития
- **Формат:** Obsidian callout `[!timeline]+` с датами, событиями и изменениями

## Базовый принцип правок
По умолчанию ассистент:
- **редактирует существующие файлы**, когда нужно уточнение или добавление;
- создаёт новый файл только если это новая сущность (новый NPC/PC/сессия/термин-страница) или отсутствует обязательный `00__SUMMARY.md`.

## Технические инварианты репозитория (важно для ассистента)
- Все текстовые файлы проекта должны быть в **UTF‑8 без BOM**.
- В репозитории используем **LF** (не CRLF).
- При правках не допускать сохранения файлов в cp1251/ANSI (иначе на GitHub будут «кракозябры»).
- Если после правок появляется `No newline at end of file` — добавить финальную новую строку.

См. также: `Assistant Guides/08__Кодировки_и_EOL.md`.

## Процесс работы: песочница и бандлы
- Все изменения сначала делаются **в песочнице** (`/mnt/data/AZL_WORK/`) и попадают в репозиторий **только через бандл** по явной команде «собирай бандл».
- «Сохрани себе / ты сохранил?» означает: **убедись, что это записано в файлах песочницы**, а не в памяти.
- **Память (bio) не используем** для деталей кампании. Источник истины — файлы репозитория и бандлы.

### Процесс обмена бандлами (страховка от потерь песочницы)
- **Бандл = дельта.** В архив попадают только **новые** и **изменённые** файлы.
- **То, чего нет в бандле, берётся из вашей основной базы проекта** (Obsidian/репозиторий/локальная папка, куда вы применяете бандлы).
- После любых реальных правок ассистент **сразу выдаёт новый `AZL__BUNDLE.zip`** (без отдельной команды «собирай бандл»).
- Пользователь применяет бандл у себя и **присылает этот же `AZL__BUNDLE.zip` обратно** — это становится новой точкой синхронизации.
- **Удаление/переименование/перенос** файлов делаем только через `AZL__MANIFEST.json` (version=1, ops=[...]) в составе бандла.

Мини‑правило: если сомневаемся, что база совпадает — сначала обмениваемся последним `AZL__BUNDLE.zip`, потом правим.


## Контентный стиль (по умолчанию)
Чтобы архив оставался удобным для игры, по умолчанию **не прописываем активные сюжетные крючки**
(кто что задумал, где спрятано, кто виноват, “если герои сделают X — случится Y”).

Вместо этого фиксируем:
- особенности человека/места (привычка, манера речи, внешний маркер);
- особенности здания/локации (не работает замок, перекошено окно, скрипит лестница, пахнет дымом/сыростью);
- бытовые детали и ограничения (когда открыто, насколько людно, что здесь “обычно” происходит).

Если нужны именно крючки/сцены — делаем их **по отдельному запросу**.

## Коротко: зачем нужен Glossary
- Быстрый поиск “что это за штука” без гаданий.
- Один термин → одна каноничная точка правды (страница/файл).
- NPC/PC в глоссарии ведут на их страницы.

## Связанные гайды
- `08__Портреты_NPC_промты.md` — как собирать промты для единообразных портретов.
